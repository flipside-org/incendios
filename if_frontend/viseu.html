<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" type="text/css" href="css/styles.css" />

  <script src="https://raw.github.com/cloudhead/less.js/master/dist/less-1.3.3.min.js" type="text/javascript"></script>

  <script src='http://api.tiles.mapbox.com/mapbox.js/v0.6.7/mapbox.js'></script>
  <link href='http://api.tiles.mapbox.com/mapbox.js/v0.6.7/mapbox.css' rel='stylesheet' />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
</head>
<body>
  <header class="container-fluid">
    <h1 class="site-name">IF Project</h1>
  </header>
  <div class="container-fluid cf">
    <div class="row-fluid">
      <div id="map" class="span8 map"> <!-- Map --></div>
      <div class="span4">
        <div class="overview">
          <h2>Viseu</h2>
          <select>
          	<option value="d">Viseu</option>
          </select>
          <select>
          	<option value="c">Concelho</option>
          </select>
          <select>
          	<option value="f">Freguesia</option>
          </select>
          <p>This shows data for fires that started in this administratie area. The fire might have spread outside this administrative area. This is merely the origin point.</p>
        </div>

        <div class="box">
          <h3>Fire type per year</h3>
          <div id="fires-year"></div>
          <h3>Burnt area per year</h3>
          <div id="burnt-area"></div>
        </div>

        <div class="box">
          <h3>Box with simple paragraph</h3>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque mauris lorem, scelerisque sed pellentesque a, accumsan non <a href="#">neque</a>. Vestibulum in eros nisl.</p>
        </div>

      </div>
    </div>
  </div>
  <div class="container-fluid">
    <div class="row content-break">

    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="limiter">
        <div class="span3">
          <h2>Project Information</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque mauris lorem, scelerisque sed pellentesque a, accumsan non neque. Vestibulum in eros nisl. Praesent ac erat non mauris sodales tempus. Suspendisse imperdiet dignissim neque, et lacinia libero aliquet eu. Sed consectetur sollicitudin orci ut ultrices. In enim turpis, vehicula nec ultrices sit amet, suscipit in dolor. Vestibulum in <a href="#">link in text</a> quam. Donec ultricies augue id magna molestie interdum. Aliquam metus libero, elementum nec fermentum nec, aliquet ut urna. Phasellus a sodales odio. Sed fringilla, magna commodo euismod ornare, augue dui congue urna, a dapibus dolor velit quis diam.</p>
        </div>
        <div class="span6">
          <div class="chart first">
            <h3>Content title<span>, 2001-2012</span></h3>
            <div class=""><img src="" width="430" height="225" alt=""></div>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque mauris lorem, scelerisque sed pellentesque a, accumsan non neque.</p>
          </div>
          <div class="chart">
            <h3>Lorem ipsum H3 title long long long with linebreak</h3>
            <div class=""><img src="" width="430" height="225" alt=""></div>
            <ul class="icons-25">
                <li>pos 1</li>
                <li>pos 2</li>
                <li>pos 3</li>
                <li>pos 4</li>
                <li>pos 5</li>
                <li>pos 6</li>
            </ul>
          </div>
        </div>
        <div class="span3">
          <div>
            <h4>Sidebar title for paragraphs</h4>
            <p class="bignum">354</p>
            <p class="infoheader">Info header</p>
            <p class="smallnum">2011 (72)</p>
            <p class="infoheader">Info header</p>
            <p class="mediumnum">January (40)</p>
          </div>
          <div>
            <h4>Sidebar title for list</h4>
            <ul id="bnOrgs">
              <li class="smallnum">List item 1</li>
              <li class="smallnum">List item 2</li>
              <li class="smallnum">List item 3</li>
              <li class="smallnum">list item with line break to long text yeah</li>
              <li class="smallnum">more list items</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="span4">
        <h2>Open Data</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque mauris lorem, scelerisque sed pellentesque a, accumsan non neque.</p>
      </div>
      <div class="span4">
        <h3>Download</h3>
        <p>Download a .csv document containing all reports visible on this site for use in a spreadsheet program or <a href="#">Link</a>.</p>
      </div>
      <div class="span4">
        <h3>More Content Box with line break</h3>
        <p><a href="#" title="">API Data Feed</a></p>
        <p>Access this data as a JSON API feed for programmatic use in a web application.</p>
      </div>
    </div>
  </div>
  <footer id="footer">
    <div class="container">
      <div class="row">
        <div class="span12">
          <p>Being built by Flipside</p>
        </div>
      </div>
    </div>
  </footer>


  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
  <script src="http://cdn.oesmith.co.uk/morris-0.4.1.min.js"></script>
  <script>
  $(document).ready(function(){

    // Create the map.
    var map = mapbox.map('map');

    map.addLayer(mapbox.layer().id('flipside.map-epnw0q4t'));

    // Add occurrences.
    map.addLayer(mapbox.layer().id('flipside.if_occurrences-2005'));

    map.zoom(8);
    map.center({ lat: 40.7168, lon: -7.8674 });





    var area = 18;

    $.ajax({
      url: 'viseu.json',
      async: false,
      dataType: "json"

    }).done(function(json_data, status){
      var object = {};
      var parsed = new Array();

      $.each(json_data, function(index, val) {
        if (val.ine == area) {
          object = val;
        }
      });

      for (var year in object.data) {
        var temp = object.data[year];
        temp['year'] = year;

        parsed.push(temp);
      }


      new Morris.Bar({
        // ID of the element in which to draw the chart.
        element: 'fires-year',
        // Chart data records -- each entry in this array corresponds to a point on
        // the chart.
        data: parsed,
        // The name of the data record attribute that contains x-values.
        xkey: 'year',
        // A list of names of data record attributes that contain y-values.
        ykeys: ['incendio', 'fogacho', 'agricola', 'queimada', 'falso_alarme'],
        // Labels for the ykeys -- will be displayed when you hover over the
        // chart.
        labels: ['Incendio', 'Fogacho', 'Agricola', 'Queimada', 'Falso Alarme'],

        stacked: true,
        hideHover : 'auto'
      });

      new Morris.Area({
        // ID of the element in which to draw the chart.
        element: 'burnt-area',
        // Chart data records -- each entry in this array corresponds to a point on
        // the chart.
        data: parsed,
        // The name of the data record attribute that contains x-values.
        xkey: 'year',
        // A list of names of data record attributes that contain y-values.
        ykeys: ['aa_total'],
        // Labels for the ykeys -- will be displayed when you hover over the
        // chart.
        labels: ['Burnt Area'],

        postUnits : ' Ha',
        hideHover : 'auto'
      });

    });
  });
  </script>

</body>
</html>
